<!-- 编辑活动内容页面 -->
<div class="container" id="content">
    <form name="entityForm" ng-submit="save()">
        <div>
            <md-input-container layout="row" class="btn-float-right">
                <md-button class="md-raised md-primary" ng-disabled="entityForm.$invalid">保存</md-button>
                <md-button class="md-raised md-warn" ng-click="cancel()">取消</md-button>
            </md-input-container>
        </div>
        <div class="row">
            <input type="hidden" class="input-large" ng-model="entity.start_time">
            <input type="hidden" class="input-large" ng-model="entity.end_time">
            <!-- 预览 -->
            <div class="col-md-5" style="top:5em;padding:0;border:solid 10px rgba(10,10,10,0.5)">
                <input type="hidden" ng-model="entity.id" />
                <div class="detail-page">
                    <img class="activity-photo" ng-src="{{poster}}">
                    
                    <!-- 标题 开始-->
                    <div class="detail-describe">
                        <div class="detail-title">
                            {{entity.title}}
                        </div>
                        <div class="detail-subhead">
                            {{entity.desc}}
                        </div>
                        <div class="detail-type">
                            {{entity.type.name}}
                        </div>
                    </div>
                    <!-- 标题 结束 -->

                    <!-- 分隔条 -->
                    <div class="divider center"></div>

                    <!-- 活动详情 -->
                    <div class="detail-activity" ng-bind-html="entity.details"></div>

                    <!-- 发起人 -->
                    <div class="detail-host">
                        <label>发起人</label>
                        <div class="hoster">
                            <div class="name"> <strong>{{entity.user.username}}</strong></div>
                            <div>
                                <span>“</span>
                                <img ng-src="{{entity.user.profile.headimgurl}}" />
                            </div>
                        </div>
                        <div class="description">
                            {{entity.user.profile.bio}}
                        </div>
                    </div>
                    <!-- 联合发起人-->
                    <div ng-if="founder" class="detail-host" ng-repeat="(key, value) in founder">
                        <label>联合发起人</label>
                        <div class="hoster">
                            <div class="name"> <strong>{{value.username}}</strong></div>
                            <div>
                                <span>“</span>
                                <img ng-src="{{value.profile.headimgurl}}" />
                            </div>
                        </div>
                        <div class="description">
                            {{value.profile.bio}}
                        </div>
                    </div>
                    <div class="detail-info">
                        <label>活动细节</label>

                        <!-- 时间 -->
                        <div class="detail-label">
                            <span> <i class="icon"><img src="/static/svg/Calendar.svg"></i>{{start_time_str}} - {{end_time_str}}</span>
                        </div>

                        <!-- 地点 -->
                        <div class="detail-label">
                            <span> <i class="icon"><img src="/static/svg/Location.svg"></i> {{selectedSpaceSpot.area}}</span>
                        </div>

                        <!-- 人数限制 -->
                        <div class="detail-label">
                            <i class="icon"><img src="/static/svg/Participant.svg"></i> 
                            <span ng-if="entity.ideal_number != 0">理想人数{{entity.ideal_number}}人</span>
                            <span ng-if="entity.ideal_number == 0">理想人数{{entity.field1}}人</span>
                        </div>

                        <!-- 收费情况 -->
                        <div class="detail-label">
                            <i class="icon"><img src="/static/svg/Funds.svg"></i><span ng-show="entity.cost>0">{{entity.cost}}元/人</span>
                            <div ng-show="entity.cost>0" class="description">{{entity.cost_list}}</div>
                            <span ng-show="entity.cost==0">免费</span>
                        </div>

                        <!-- 活动流程 -->
                        <div class="detail-label">
                            <span><i class="icon"><img ng-src="/static/svg/Flow.svg"></i>活动流程</span>
                        </div>

                        <div ng-bind-html="entity.review" class="detail-flow"></div>

                        <!-- tips -->
                        <div class="detail-label" style="margin-top:0.6rem;">
                            <span> <i class="icon"><img ng-src="/static/svg/Tips.svg"></i> Tips<div ng-bind-html="entity.field2"  class="detail-flow"></div></span>
                        </div>

                        <!-- 微信二维码 -->
                        <div class="detail-rqcode">
                            <div class="imgrqcode">
                                <div class="rqcode"> <img ng-src="{{group_code}}"></div>
                            </div>
                            <div class="detail-danger">
                                <span class="detail-danger-content">!</span>
                            </div>
                            <div class="detail-rqcode-text">
                                报名通过后，你可以通过扫描二维码进入微信群，沟通活动事项。通过活动报名后，任何原因未能参与活动即算爽约。
                            </div>
                        </div>
                    </div>
                    <!-- 发起人 -->
                    <div class="detail-host" style="display:none">
                        <label>关于发起人</label>
                        <div class="hoster">
                            <img ng-src="{{entity.user.profile.headimgurl}}" />
                            <div class="name"> <strong>{{entity.user.username}}</strong>
                            </div>
                        </div>
                        <div class="description">{{entity.user.profile.bio}}</div>
                    </div>
                </div>
            </div>
            <!-- 预览 end -->
            <div class="col-md-7">
                <input type="hidden" ng-model="entity.id" />
                <div class="page-header">
                  <h1>发起人 {{user.username}}</h1>
                </div>
                <div class="row">
                    <div class="col-md-6 margin-top-10">
                        <label>活动类型</label>
                        <md-input-container>
                            <md-select name="group" required ng-model="entity.type_id" placeholder="选择分类">
                                <md-option ng-value="opt.id" ng-repeat="opt in type_list">{{ opt.name }}</md-option>
                            </md-select>
                            <div ng-messages="entityForm.group.$error">
                                <div ng-message="required">必填项目</div>
                            </div>
                        </md-input-container>
                    </div>
                </div>
                <div layout="row">
                    <md-input-container flex="">
                        <label>活动标题</label>
                        <input placeholder="活动标题" name="title" type="text" md-maxlength="30" required minlength="3" ng-model="entity.title">
                        <div ng-messages="entityForm.title.$error">
                            <div ng-message="required">必填项目</div>
                            <div ng-message="minlength">标题文字限制为3-30个字符</div>
                            <div ng-message="md-maxlength">标题文字不能超过30个字符</div>
                        </div>
                    </md-input-container>
                    <md-input-container flex="40">
                        <label>副标题</label>
                        <input placeholder="副标题" name="viceTitle" type="text" md-maxlength="30" ng-model="entity.desc" />
                        <div ng-messages="entityForm.viceTitle.$error">
                            <div ng-message="md-maxlength">副标题文字不能超过30个字符</div>
                        </div>
                    </md-input-container>
                </div>
                <md-input-container flex="100">
                    <label>本周活动列表露出的活动名称</label>
                    <textarea ng-model="entity.content"></textarea>
                </md-input-container>
                <div layout="row">
                    <div ng-file-select="onPosterSelect($files)" data-multiple="false" title="select file" onclick="this.value = null" class="btn btn-upload">
                        <md-button class="md-raised md-info"> <i class="fa fa-cloud-upload fa-3x">活动标题图片</i> </md-button>
                    </div>
                    <p>
                        {{selectPoster.progress.p}}%
                    </p>
                    <div><b>建议尺寸大小为:800x455px<br/>请上传小于1MB内的图片</b></div>
                </div>
                <div layout="row">
                    <md-input-container>
                        <!-- <label>开始时间</label> -->
                        <div class="dropdown">
                            <a class="dropdown-toggle my-toggle-select" id="dLabel" role="button" data-toggle="dropdown" data-target="#" href="">
                                <div class="input-append">
                                    <input type="text" class="input-large" ng-model="start_time_str">
                                    <span class="add-on">
                                        开始时间
                                        <i class="fa fa-calendar" aria-hidden="true"></i>
                                    </span>
                                </div>
                            </a>
                            <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
                                <datetimepicker data-datetimepicker-config="{ minuteStep:1 }" data-on-set-time="onStartTimeSet(newDate, oldDate)" ng-model="start_time_str"></datetimepicker>
                            </ul>
                        </div>
                    </md-input-container>
                    <md-input-container>
                        <!-- <label>结束时间</label> -->
                        <div class="dropdown">
                            <a class="dropdown-toggle my-toggle-select" id="endLabel" role="button" data-toggle="dropdown" data-target="#" href="">
                                <div class="input-append">
                                    <input type="text" class="input-large" ng-model="end_time_str">
                                    <span class="add-on">
                                        结束时间
                                        <i class="fa fa-calendar" aria-hidden="true"></i>
                                    </span>
                                </div>
                            </a>
                            <ul class="dropdown-menu" role="menu" aria-labelledby="endLabel">
                                <datetimepicker data-on-set-time="onStopTimeSet(newDate, oldDate)" ng-model="end_time_str"></datetimepicker>
                            </ul>
                        </div>
                    </md-input-container>
                </div>
                <md-input-container>
                    <label>收费金额(0为免费)</label>
                    <input type="number" name="fee" ng-model="entity.cost" value="{{entity.cost}}" min="0" />
                    <div ng-messages="entityForm.fee.$error">
                        <div ng-message="min">金额不能为负数</div>
                    </div>
                </md-input-container>
                <md-input-container>
                    <label>收费明细</label>
                    <textarea ng-model="entity.cost_list"></textarea>
                </md-input-container>
                <md-input-container>
                    <label>活动详情</label>
                    <text-angular ng-model="entity.details" placeholder="一段表述清晰,通畅的活动介绍,有助于把你的活动更好的呈现给大家,吸引更多的人报名参加你的活动。活动介绍可以由以下几部分构成:1、简介一下你自己2、简介一下你的活动流程3、简介一下你的活动的结果4、是不是能有一些升华的部分?以下范例就是由以上4个模块构成。填写范例:(开头两句为固定句式,要记得填写哦):这是Someet活动发起人,XX工坊创始人夏雨发起的【木艺勺子工作坊】活动 我期待遇见热爱手作,喜欢蹂躏木块儿的小伙伴 在活动中,你会亲自参与到一件木艺勺子的刻、挖、抛光、打磨、上油、蜡等制作环节 最终得到一件自己亲自设计和制作的精致木工勺子 不过你得到的可不仅仅是一个勺子,几个小时的打磨,get到新技能的同时,你收获的将会是一个更好的自己。"></text-angular>
                </md-input-container>
                <md-input-container>
                    <label>活动流程</label>
                    <text-angular ng-model="entity.review" placeholder="填写范例:1、集合之后,先来自我介绍或其他破冰环节;2、大家品尝某款酒后开始分享感受 / 大家一起从X出发,先前往XX / 我会先给大家分享一些这个领域的常识和注意事项 3、...4、...5、活动愉快结束,各自勾搭,各回各家"></text-angular>
                </md-input-container>
                <md-input-container>
                    <label>Tips</label>
                    <div>1.活动不允许空降,如果有同行的小伙伴请把活动分享给TA让TA自行报名哟;</div>
                    <div>
                        2.活动若无法照常参加,请进入Someet服务平台中的个人界面自行请假;
                    </div>
                    <text-angular placeholder="Tips的开始序号请从3.开始写" ng-model="entity.field2" placeholder="Tips"></text-angular>
                </md-input-container>
                <md-input-container layout="row" class="btn-float-right">
                    <md-button class="md-raised md-primary" ng-disabled="entityForm.$invalid">保存</md-button>
                    <md-button class="md-raised md-warn" ng-click="cancel()">取消</md-button>
                </md-input-container>
            </div>
        </div>
    </form>
</div>
