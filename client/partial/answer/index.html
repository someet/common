<!-- 筛选用户页面 -->
<div class="container">
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-12  panel-default">
                <div class="panel-body" style="font-size:18px">
                    活动标题：{{list[0].activity.title}}&nbsp;&nbsp;
                    <br> 发起人：{{list[0].activity.user.username}}&nbsp;&nbsp;
                    <br> 活动时间：{{list[0].activity.start_time * 1000 | date: "MM月dd日 HH:mm"}} - {{list[0].activity.end_time * 1000 | date:"MM月dd日 HH:mm"}}&nbsp;&nbsp;
                    <br> 活动地址：{{list[0].activity.address}}&nbsp;&nbsp;
                    <br> 整体评分：{{ countScore }}分
                    <br> 好评数：{{ goodScore}}&nbsp;&nbsp;中评数：{{ middleScore }}&nbsp;&nbsp;差评数：{{ badScore }}&nbsp;&nbsp;
                    <br> 发起人最后评分：{{ sponsorScore }}分&nbsp;&nbsp;
                    <br> 迟到人数比率：{{ list[0].late_ratio }}&nbsp;&nbsp;
                    <br> 请假人数比率：{{ list[0].leave_ratio }}&nbsp;&nbsp;
                    <br> 爽约人数比率：{{ list[0].arrive_no_ratio }}&nbsp;&nbsp;
                    <br> 报名总人数：{{ list.length }}&nbsp;&nbsp;
                </div>
            </div>
        </div>
    </div>
    <!-- <h3>发起人 - 当前活动标题 （活动时间）</h3> -->
    <div layout="row" flex id="content">
        <!-- 用户列表 -->
        <div class="col-md-6">
            <div ng-cloak>
                <md-content>
                    <md-tabs md-dynamic-height md-border-bottom>
                        <md-tab label="待筛选{{answerFilter.length}}">
                            <md-content class="md-padding">
                                <ul class="list-group">
                                    <li class="list-group-item" ng-repeat="entity in list | filter: {status: 10, apply_status:0} as answerFilter" ng-click="view(entity)">
                                        <div class="media">
                                            <a class="pull-left" href="">
                                                <img width="50" height="50" style="border-radius: 25px" class="media-object avatarSize" ng-src="{{entity.user.profile.headimgurl}}" alt="头像">
                                            </a>
                                            <span>
                                        <strong>{{entity.user.profile.name}}（{{entity.user.username}}）</strong>
                                        </span>
                                        </div>
                                    </li>
                                </ul>
                            </md-content>
                        </md-tab>
                        <md-tab label="通过{{answerPass.length}}">
                            <md-content class="md-padding">
                                <ul class="list-group">
                                    <li class="list-group-item" ng-repeat="entity in list | filter: {status:20, leave_status:0} as answerPass" ng-click="view(entity)">
                                        <div class="media">
                                            <a class="pull-left" href="">
                                                <img width="50" height="50" style="border-radius: 25px" class="media-object avatarSize" ng-src="{{entity.user.profile.headimgurl}}" alt="头像" />
                                            </a>
                                            <span>
                                            <strong>{{entity.user.profile.name}}（{{entity.user.username}}）</strong>
                                        </span>
                                            <md-button class="md-raised md-warn" ng-if="entity.leave_status == 1" class="btn-float-right">请假</md-button>
                                            <md-button class="md-raised md-warn" ng-if="entity.arrive_status == 1" class="btn-float-right">迟到</md-button>
                                            <md-button class="md-raised md-warn" ng-if="entity.arrive_status == 0" class="btn-float-right">爽约</md-button>
                                            <md-button class="md-raised md-warn" ng-if="entity.arrive_status == 2" class="btn-float-right">准时到达</md-button>
                                            <md-button ng-if="entity.feedback" class="md-raised md-warn">已反馈</md-button>
                                            <md-button ng-if="!entity.feedback" class="md-raised md-warn">未反馈</md-button>
                                        </div>
                                    </li>
                                </ul>
                            </md-content>
                        </md-tab>
                        <md-tab label="请假{{answerLeave.length}}">
                            <md-content class="md-padding">
                                <ul class="list-group">
                                    <li class="list-group-item" ng-repeat="entity in list | filter: {status:20, leave_status:1} as answerLeave" ng-click="view(entity)">
                                        <div class="media">
                                            <a class="pull-left" href="">
                                                <img width="50" height="50" style="border-radius: 25px" class="media-object avatarSize" ng-src="{{entity.user.profile.headimgurl}}" alt="头像" />
                                            </a>
                                            <span>
                                            <strong>{{entity.user.profile.name}}（{{entity.user.username}}）</strong>
                                        </span>
                                        </div>
                                    </li>
                                </ul>
                            </md-content>
                        </md-tab>
                        <md-tab label="取消报名{{answerCancel.length}}">
                            <md-content class="md-padding">
                                <ul class="list-group">
                                    <li class="list-group-item" ng-repeat="entity in list | filter: {status:10, apply_status:1} as answerCancel" ng-click="view(entity)">
                                        <div class="media">
                                            <a class="pull-left" href="">
                                                <img width="50" height="50" style="border-radius: 25px" class="media-object avatarSize" ng-src="{{entity.user.profile.headimgurl}}" alt="头像" />
                                            </a>
                                            <span>
                                        <strong>{{entity.user.profile.name}}（{{entity.user.username}}）</strong>
                                    </span>
                                        </div>
                                    </li>
                                </ul>
                            </md-content>
                        </md-tab>
                        <md-tab label="未通过{{answerReject.length}}">
                            <md-content class="md-padding">
                                <ul class="list-group">
                                    <li class="list-group-item" ng-repeat="entity in list | filter: {status:30} as answerReject" ng-click="view(entity)">
                                        <div class="media">
                                            <a class="pull-left" href="">
                                                <img width="50" height="50" style="border-radius: 25px" class="media-object avatarSize" ng-src="{{entity.user.profile.headimgurl}}" alt="头像">
                                            </a>
                                            <span>
                                        <strong>{{entity.user.profile.name}}（{{entity.user.username}}）</strong>
                                    </span>
                                            <span class="btn-float-right" style="color:#E33;">未通过</span>
                                        </div>
                                    </li>
                                </ul>
                            </md-content>
                        </md-tab>
                    </md-tabs>
                </md-content>
            </div>
        </div>
        <!-- 用户列表 end -->
        <!-- 用户资料详情 -->
        <div class="col-md-6" ng-show="entity.user" style="padding:0;border:solid 10px rgba(10,10,10,0.5); position: fixed;top:75px;overflow: auto; height: 80%;">
            <div class="media">
                <div style="padding:20px;">
                    <div class="pull-left">
                        <img width="50" style="border-radius: 25px" class="media-object avatarSize" ng-src="{{entity.user.profile.headimgurl}}" alt="...">
                    </div>
                    <div style="margin-left:80px;top:0;">
                        <div style="width:100%;display:inline-block;">
                            <span>
              <font size="+2">
                <strong>{{entity.user.profile.name}}（{{entity.user.username}}）</strong>
              </font>
            </span>
                            <div class="pull-right">
                                <button class="btn btn-success" ng-click="pass(entity)">通过</button>
                                <button class="btn btn-danger" ng-click="reject(entity)">不通过</button>
                                <button class="btn btn-default" ng-click="apply(entity, 1)">取消报名</button>
                                <button class="btn btn-default" ng-click="apply(entity, 0)">不取消报名</button>
                                <button class="btn btn-default" ng-click="leave(entity, 1)">请假</button>
                                <button class="btn btn-default" ng-click="leave(entity, 0)">取消请假</button>
                                <button class="btn btn-default" ng-click="arrive(entity, 0)">未到</button>
                                <button class="btn btn-default" ng-click="arrive(entity, 1)">迟到</button>
                                <button class="btn btn-default" ng-click="arrive(entity, 2)">准时</button>
                            </div>
                        </div>
                        <div>
                            <span style="color:#777;">
              {{entity.user.profile.sex==1 ? '男' : entity.user.profile.sex==2 ? '女' : '性别不明'}}
            </span>
                            <span ng-show="entity.user.profile.birth_year" style="color:#777;">
              {{ (today | date:'yyyy') - entity.user.profile.birth_year }}岁
            </span>
                            <span style="color:#777;" ng-show="!entity.user.profile.birth_year">年纪不知</span>
                            <div class="pull-right">
                                到达状态:
                                <span ng-if="entity.arrive_status==10" style="color:#33E;">未设置</span>
                                <span ng-if="entity.arrive_status==0" style="color:#33E;">爽约</span>
                                <span ng-if="entity.arrive_status==1" style="color:#33E;">迟到</span>
                                <span ng-if="entity.arrive_status==2" style="color:#33E;">准时</span>
                                当前状态：
                                <span ng-if="entity.status==10" style="color:#33E;">待筛选</span>
                                <span ng-if="entity.status==20" style="color:#3E3;">已通过</span>
                                <span ng-if="entity.status==30" style="color:#E33;">未通过</span>
                                <span ng-if="entity.is_send==1" style="color:#333;">
                <p>已于 {{entity.send_at|date}} 发送通知</p>
              </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-3">
                    <md-button ng-disabled="dbtn" class="md-raised md-warn" ng-click='sendMessage(entity,dbtn)'>发送通知</md-button>
                </div>
                <div class="col-md-8">
                    {{feedbackResult}}
                </div>
            </div>
            <div class="row">
                <div class="col-md-7">
                    <ul class="list-group">
                        <li class="list-group-item list-group-item-success">注册时间： {{ entity.user.created_at * 1000 | date: "yyyy年MM月dd日 HH:mm:ss"}}</li>
                        <li class="list-group-item list-group-item-info">报名时间：{{ entity.created_at * 1000 | date: "yyyy年MM月dd日 HH:mm:ss"}}</li>
                        <li class="list-group-item list-group-item-danger">
                            <div ng-show="entity.user.profile.from>0">
                                来自：
                                <span ng-if="entity.user.profile.from==1">朋友圈看到，就手抖点进来了</span>
                                <span ng-if="entity.user.profile.from==2">朋友专门给我安利过</span>
                                <span ng-if="entity.user.profile.from==3">有所耳闻，自己一路找过来的</span>
                            </div>
                        </li>
                        <li class="list-group-item list-group-item-info">报名次数：{{entity.user.join_count}} 通过次数：{{entity.user.attend_count}}</li>
                        <li class="list-group-item list-group-item-info">反馈次数：{{entity.feedback_count}} 迟到次数:{{entity.arrive_late}}</li>
                    </ul>
                </div>
                <div class="col-md-5">
                    <ul class="list-group">
                        <li class="list-group-item list-group-item-success">
                            <div ng-show="entity.user.mobile">
                                手机号： {{entity.user.mobile}}
                            </div>
                        </li>
                        <li class="list-group-item list-group-item-info">
                            <div ng-show="entity.user.wechat_id">
                                微信id： {{entity.user.wechat_id}}
                            </div>
                        </li>
                        <li class="list-group-item list-group-item-warning">
                            <div ng-show="entity.user.profile.occupation">
                                职业：{{entity.user.profile.occupation}}
                            </div>
                        </li>
                        <li class="list-group-item list-group-item-info">爽约次数:{{entity.arrive_no}} 被拒绝的次数:{{entity.user.reject_count}}</li>
                    </ul>
                </div>
            </div>
            <div style="margin:10px;" class="col-md-12" ng-repeat="answer in answerItemList">
                <div style="margin:5px;color:#999">问题{{$index+1}}: {{answer.question_label}}</div>
                <div style="margin:5px;padding:5px;border-radius:10px;border:1px solid rgba(10,10,10,0.1)">{{answer.question_value}}</div>
            </div>
            <br />
                <div class="row">
                    <div class="col-md-5">  
                        <ul class="list-group" ng-show="entity.feedback.stars">
                          <li class="list-group-item">旧的评分系统</li>
                          <li class="list-group-item">活动得分：{{entity.feedback.stars}}分</li>
                          <li class="list-group-item">发起人分：{{entity.feedback.sponsor_stars}}分</li>
                        </ul>
                    </div>                
                    <div class="col-md-5">  
                        <ul class="list-group" ng-show="entity.feedback">
                          <li class="list-group-item">新的评分系统</li>
                          <li class="list-group-item">
                            整体活动：
                                <span ng-if="entity.feedback.grade == 1"> 好评</span>
                                <span ng-if="entity.feedback.grade == 2"> 中评</span>
                                <span ng-if="entity.feedback.grade == 3"> 差评</span>
                            </li>
                          <li class="list-group-item">态度友好：{{entity.feedback.sponsor_start1}}分</li>
                          <li class="list-group-item">充分准备：{{entity.feedback.sponsor_start2}}分</li>
                          <li class="list-group-item">现场控制：{{entity.feedback.sponsor_start3}}分</li>
                        </ul>
                    </div>
                </div>
            <div ng-show="entity.feedback">
                <div style="margin:10px;margin:5px;color:#999">用户评价：</div>
                <div style="margin:5px;padding:5px;border-radius:10px;border:1px solid rgba(10,10,10,0.1)"> {{entity.feedback.feedback}}</div>
            </div>
        </div>
    </div>
</div>
