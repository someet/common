<div>
    <div class="container">
        <button type="button" class="btn btn-success btn-lg" ng-click="createPage()">
            <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
            新建活动
        </button>
        <form class="navbar-form navbar-right" role="search">
            <div class="form-group">
                <input type="text" class="form-control" placeholder="标题"></div>
            <button type="submit" class="btn btn-default">
                <span class="glyphicon glyphicon-search" aria-hidden="true"></span>
                搜索
            </button>
        </form>
        <div>
            <ul class="nav nav-tabs">
                <li ng-class="{active:isActive('0')}">
                    <a href="#/activity/list/0">全部</a>
                </li>
                <li ng-class="{active:isActive(entity.id)}" ng-repeat="entity in activityTypeList | orderBy: 'display_order' " >
                    <a href="#/activity/list/{{entity.id}}">{{entity.name}}</a>
                </li>
                <li>
                    <a ng-click="onTypeAddClicked()">
                        <span class="glyphicon glyphicon-plus-sign" ></span>
                    </a>
                    <input type="text" ng-if="showAddForm" ng-model="addForm.newType" />
                    <button class="btn-success" ng-if="showAddForm" ng-click="commitTypeName(addForm.newType)">确认添加</button>
                    <button class="btn-default" ng-if="showAddForm" ng-click="cancelAddType()">取消</button>
                </li>
            </ul>
        </div>
    </div>
</div>

<div class="activityList container">
    <ul class="activityListProperty">
        <li ng-repeat="entity in list | orderBy: 'display_order' ">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title">
                        <button type="button" class="btn btn-danger " ng-if="entity.is_top==1" ng-click="top(entity, 0)" data-toggle="button" >
                            <span class="glyphicon glyphicon-circle-arrow-down" aria-hidden="true">取消置顶</span>
                        </button>
                        <button type="button" class="btn btn-default " ng-if="entity.is_top==0" ng-click="top(entity, 1)" data-toggle="button" >
                            <span class="glyphicon glyphicon-circle-arrow-up" aria-hidden="true">置顶</span>
                        </button>
                        #{{entity.id}}
                        <span ng-if="entity.status==10" class="btn-danger">{{entity.title}}(草稿)</span>
                        <span ng-if="entity.status==20" class="btn-primary">{{entity.title}}(发布)</span>

                        <!--ng-if="count(entity.feedbackList)>0"-->
                        <button  class="btn btn-primary btn-float-right" type="button">
                            反馈
                            <span class="badge">{{entity.feedback_count}}</span>
                        </button>
                        <button ng-if="entity.question" class="btn btn-warning btn-float-right" type="button" ng-click="viewAnswer(entity)">
                            报名（16/{{entity.peoples}}）
                            <span class="badge"></span>
                        </button>
                    </h3>
                </div>
                <div class="panel-body">
                    <div class="btn-group">

                        <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                            {{entity.type.name}}
                            <span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu" role="menu">
                            <li ng-repeat="type in activityTypeList | orderBy: 'display_order' ">
                                <a ng-click="onTypeChangeClick(entity,type.id)">{{type.name}}</a>
                            </li>
                        </ul>
                    </div>
                    <button class="btn btn-info" type="button" >预览</button>
                    <a class="btn btn-success" href="#/activity/{{entity.id}}">编辑</a>
                    <button class="btn btn-warning" ng-click="release(entity)" type="button">发布</button>
                    <button ng-if="!entity.question" class="btn" ng-click="viewQuestion(entity)">设置报名表单</button>
                    <button ng-if="entity.question" class="btn" ng-click="viewQuestion(entity)">修改报名表单</button>
                    <button ng-if="entity.question" class="btn" ng-click="previewQuestion(entity)">预览报名表单</button>

                    <div class="btn-group">
                        <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                            <span ng-if="entity.edit_status==10">doing</span>
                            <span ng-if="entity.edit_status==20">pause</span>
                            <span ng-if="entity.edit_status==30">done</span>
                            <span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu" role="menu">
                            <li> <a ng-click="onEditStatusChangeClick(entity, 10)">doing</a> </li>
                            <li> <a ng-click="onEditStatusChangeClick(entity, 20)">pause</a> </li>
                            <li> <a ng-click="onEditStatusChangeClick(entity, 30)">done</a> </li>
                        </ul>
                    </div>

                    <div class="btn-group btn-float-right">
                        <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                            更多
                            <span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu" role="menu">
                            <li>
                                <a ng-click="delete(entity)">删除活动</a>
                            </li>
                            <li>
                                <a ng-click="copy(entity)">复制活动</a>
                            </li>
                            <li class="divider"></li>
                            <li>
                                <a ng-click="applyStatus(entity, 20)">关闭报名</a>
                            </li>
                            <li>
                                <a ng-click="applyStatus(entity, 10)">打开报名</a>
                            </li>
                        </ul>
                    </div>
                    <div class="btn-float-right">
                        <span ng-if="entity.question.status==20">报名已关闭</span>
                        <span ng-if="entity.question.status==10">报名打开</span>
                    </div>
                </div>
            </div>
        </li>
    </ul>
</div>