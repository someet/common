<div class="container">
    <div ng-controller="ActivityCtrl">
        <button type="button" class="btn btn-success btn-lg" ng-click="createPage()">
            <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
            新建活动
        </button>
        <form class="navbar-form navbar-right" role="search">
            <div class="form-group">
                <input type="text" class="form-control" placeholder="标题"></div>
            <button type="submit" class="btn btn-default">
                <span class="glyphicon glyphicon-search" aria-hidden="true"></span>
                搜索
            </button>
        </form>
    </div>
</div>
<div class="container">
    <div>
        <ul class="nav nav-tabs">
            <li class="active">
                <a href="#/activity/list/0">全部</a>
            </li>
            <li ng-repeat="entity in activityTypeList | orderBy: 'display_order' " >
                <a href="#/activity/list/{{entity.id}}">{{entity.name}} <span style="color: gray; font-size:12px">{{entity.activity_count}}</span></a>
            </li>
            <li>
                <button ng-click="onTypeAddClicked()">
                    <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
                </button>
                <input type="text" ng-if="showAddForm" ng-model="addForm.newType" />
                <button ng-if="showAddForm" ng-click="commitTypeName(addForm.newType)">确认添加</button>
            </li>
        </ul>
    </div>
    <div class="activityList">
        <ul class="activityListProperty">
            <li ng-repeat="entity in list | orderBy: 'display_order' ">
                <div class="panel panel-primary">
                    <div class="panel-heading">
                        <h3 class="panel-title">
                            <button type="button" class="btn btn-default " ng-if="entity.is_top==1" ng-click="top(entity, 0)" data-toggle="button" >
                                <span class="glyphicon glyphicon-circle-arrow-up" aria-hidden="true">取消置顶</span>
                            </button>
                            <button type="button" class="btn btn-default " ng-if="entity.is_top==0" ng-click="top(entity, 1)" data-toggle="button" >
                                <span class="glyphicon glyphicon-circle-arrow-up" aria-hidden="true">置顶</span>
                            </button>
                            {{entity.title}}
                            <button class="btn btn-primary btn-float-right" type="button" ng-click="viewAnswer(entity)">
                                反馈
                                <span class="badge">{{entity.feedback_count}}</span>
                            </button>
                            <button class="btn btn-warning btn-float-right" type="button">
                                报名（16/{{entity.peoples}}）
                                <span class="badge"></span>
                            </button>
                        </h3>
                    </div>
                    <div class="panel-body">
                        <div class="btn-group">

                            <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                                {{entity.type.name}}
                                <span class="caret"></span>
                            </button>
                            <ul class="dropdown-menu" role="menu">
                                <li ng-repeat="type in activityTypeList | orderBy: 'display_order' ">
                                    <a ng-click="onTypeChangeClick(entity,type.id)">{{type.name}}</a>
                                </li>
                            </ul>
                        </div>
                        <button class="btn btn-info" type="button" >查看</button>
                        <a class="btn btn-success" href="#/activity/{{entity.id}}">编辑</a>
                        <button class="btn btn-warning" type="button">发布</button>
                        <button ng-if="!entity.question" class="btn" ng-click="viewQuestion(entity)">设置报名表单</button>
                        <button ng-if="entity.question" class="btn" ng-click="viewQuestion(entity)">修改报名表单</button>
                        <button ng-if="entity.question" class="btn" ng-click="previewQuestion(entity)">预览报名表单</button>
                        <div class="btn-group btn-float-right">
                            <span
  ng-if="entity.question.status==0">关闭</span>
   <span
  ng-if="entity.question.status==20">打开</span>
                            <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                                更多
                                <span class="caret"></span>
                            </button>
                            <ul class="dropdown-menu" role="menu">
                                <li>
                                    <a ng-click="delete(entity)">删除活动</a>
                                </li>
                                <li>
                                    <a href="#">复制活动</a>
                                </li>
                                <li class="divider"></li>
                                <li>
                                    <a ng-click="onApplyCloseClick(entity)">关闭报名</a>
                                </li>
                                <li>
                                    <a ng-click="onApplyOpenClick(entity)">打开报名</a>
                                </li>
                                <li class="divider"></li>
                                <li>
                                    <a href="#">结束活动</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </li>
        </ul>
    </div>
</div>

